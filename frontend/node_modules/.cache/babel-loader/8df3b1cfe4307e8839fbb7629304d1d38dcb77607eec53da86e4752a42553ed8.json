{"ast":null,"code":"import _objectSpread from\"/home/nawaf/aws-project/pupper-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{X,Save,Upload}from'lucide-react';import{useUpdateDog}from'../hooks/useDogs';import ImageUpload from'./ImageUpload';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const EditDogModal=_ref=>{let{dog,isOpen,onClose}=_ref;const[formData,setFormData]=useState({shelter_name:'',city:'',state:'',dog_name:'',dog_species:'Labrador Retriever',shelter_entry_date:'',dog_description:'',dog_birthday:'',dog_weight:'',dog_color:'',dog_photo_url:'',status:'available'});const[uploadedImage,setUploadedImage]=useState(null);const updateMutation=useUpdateDog();// Populate form when dog data changes\nuseEffect(()=>{if(dog){setFormData({shelter_name:dog.shelter_name||'',city:dog.city||'',state:dog.state||'',dog_name:dog.dog_name||'',dog_species:dog.dog_species||'Labrador Retriever',shelter_entry_date:dog.shelter_entry_date||'',dog_description:dog.dog_description||'',dog_birthday:dog.dog_birthday||'',dog_weight:dog.dog_weight||'',dog_color:dog.dog_color||'',dog_photo_url:dog.dog_photo_url||'',status:dog.status||'available'});}},[dog]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleImageUploaded=imageData=>{setUploadedImage(imageData);if(imageData){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{dog_photo_url:imageData.original_url}));}};const handleSubmit=async e=>{e.preventDefault();try{await updateMutation.mutateAsync({dogId:dog.dog_id,updates:formData});onClose();}catch(error){// Error handling is done in the mutation\n}};if(!isOpen||!dog)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Edit \",dog.dog_name]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"p-2 text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Dog Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dog_name\",value:formData.dog_name,onChange:handleInputChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Species *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"dog_species\",value:formData.dog_species,onChange:handleInputChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Labrador Retriever\",children:\"Labrador Retriever\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Labrador Mix\",children:\"Labrador Mix\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Color *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dog_color\",value:formData.dog_color,onChange:handleInputChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"e.g., golden, black, chocolate\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Weight (lbs) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"dog_weight\",value:formData.dog_weight,onChange:handleInputChange,required:true,min:\"1\",max:\"200\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Birthday (MM/DD/YYYY) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dog_birthday\",value:formData.dog_birthday,onChange:handleInputChange,required:true,placeholder:\"MM/DD/YYYY\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"adopted\",children:\"Adopted\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Shelter Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Shelter Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"shelter_name\",value:formData.shelter_name,onChange:handleInputChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Entry Date (MM/DD/YYYY) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"shelter_entry_date\",value:formData.shelter_entry_date,onChange:handleInputChange,required:true,placeholder:\"MM/DD/YYYY\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",value:formData.city,onChange:handleInputChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"State *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"state\",value:formData.state,onChange:handleInputChange,required:true,maxLength:\"2\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"e.g., CA, NY, TX\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Additional Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"dog_description\",value:formData.dog_description,onChange:handleInputChange,rows:4,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"Tell us about this dog's personality, behavior, and what makes them special...\"})]}),/*#__PURE__*/_jsx(ImageUpload,{onImageUploaded:handleImageUploaded,dogId:dog.dog_id}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Or enter photo URL manually\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"dog_photo_url\",value:formData.dog_photo_url,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"https://example.com/dog-photo.jpg\",disabled:!!uploadedImage}),uploadedImage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"URL automatically filled from uploaded image\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn-ghost\",disabled:updateMutation.isLoading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary flex items-center\",disabled:updateMutation.isLoading,children:updateMutation.isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner w-4 h-4 mr-2\"}),\"Updating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{size:18,className:\"mr-2\"}),\"Update Dog\"]})})]})]})]})});};export default EditDogModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}