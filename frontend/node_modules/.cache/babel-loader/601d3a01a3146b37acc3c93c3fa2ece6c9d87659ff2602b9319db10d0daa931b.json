{"ast":null,"code":"import { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { assertAuthTokens } from '../../utils/types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getCurrentUser = async amplify => {\n  var _amplify$getConfig$Au, _tokens$idToken$paylo, _tokens$idToken;\n  const authConfig = (_amplify$getConfig$Au = amplify.getConfig().Auth) === null || _amplify$getConfig$Au === void 0 ? void 0 : _amplify$getConfig$Au.Cognito;\n  assertTokenProviderConfig(authConfig);\n  const tokens = await amplify.Auth.getTokens({\n    forceRefresh: false\n  });\n  assertAuthTokens(tokens);\n  const {\n    'cognito:username': username,\n    sub\n  } = (_tokens$idToken$paylo = (_tokens$idToken = tokens.idToken) === null || _tokens$idToken === void 0 ? void 0 : _tokens$idToken.payload) !== null && _tokens$idToken$paylo !== void 0 ? _tokens$idToken$paylo : {};\n  const authUser = {\n    username: username,\n    userId: sub\n  };\n  const signInDetails = getSignInDetailsFromTokens(tokens);\n  if (signInDetails) {\n    authUser.signInDetails = signInDetails;\n  }\n  return authUser;\n};\nfunction getSignInDetailsFromTokens(tokens) {\n  return tokens === null || tokens === void 0 ? void 0 : tokens.signInDetails;\n}\nexport { getCurrentUser };\n//# sourceMappingURL=getCurrentUser.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}