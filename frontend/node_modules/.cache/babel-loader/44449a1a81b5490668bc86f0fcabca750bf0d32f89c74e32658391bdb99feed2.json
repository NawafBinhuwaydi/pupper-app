{"ast":null,"code":"import _objectSpread from\"/home/nawaf/pupper-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useQuery,useMutation,useQueryClient}from'react-query';import{dogsApi,apiUtils}from'../services/api';import{toast}from'react-toastify';// Query keys\nexport const QUERY_KEYS={DOGS:'dogs',DOG:'dog'};// Hook to fetch all dogs with filters\nexport const useDogs=function(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return useQuery([QUERY_KEYS.DOGS,filters],()=>dogsApi.getDogs(filters),_objectSpread({staleTime:2*60*1000,// 2 minutes\ncacheTime:5*60*1000,// 5 minutes\nonError:error=>{const errorInfo=apiUtils.handleError(error);if(process.env.NODE_ENV==='development'){console.error('Dogs query error:',errorInfo);}// Only show toast for non-network errors to avoid spam\nif(errorInfo.status!==0){toast.error(\"Failed to load dogs: \".concat(errorInfo.message));}}},options));};// Hook to fetch a single dog by ID\nexport const useDogDetails=function(dogId){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return useQuery([QUERY_KEYS.DOG,dogId],()=>dogsApi.getDog(dogId),_objectSpread({enabled:!!dogId,// Only run query if dogId exists\nstaleTime:5*60*1000,// 5 minutes\ncacheTime:10*60*1000,// 10 minutes\nonError:error=>{const errorInfo=apiUtils.handleError(error);if(process.env.NODE_ENV==='development'){console.error('Dog query error:',errorInfo);}if(errorInfo.status!==0){toast.error(\"Failed to load dog details: \".concat(errorInfo.message));}}},options));};// Hook to vote on a dog\nexport const useVoteDog=()=>{const queryClient=useQueryClient();return useMutation(_ref=>{let{dogId,voteData}=_ref;return dogsApi.voteDog(dogId,voteData);},{onSuccess:(data,variables)=>{// Invalidate and refetch dogs list\nqueryClient.invalidateQueries([QUERY_KEYS.DOGS]);// Invalidate specific dog query\nqueryClient.invalidateQueries([QUERY_KEYS.DOG,variables.dogId]);const voteType=variables.voteData.vote_type==='wag'?'👍':'👎';toast.success(\"\".concat(voteType,\" Vote recorded!\"));},onError:error=>{const errorInfo=apiUtils.handleError(error);toast.error(\"Failed to record vote: \".concat(errorInfo.message));}});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}