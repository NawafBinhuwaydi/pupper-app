{"ast":null,"code":"import { AWS_CLOUDWATCH_CATEGORY } from '../constants.mjs';\nimport { LogType } from './types.mjs';\n\n/* eslint-disable no-console */\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst LOG_LEVELS = {\n  VERBOSE: 1,\n  DEBUG: 2,\n  INFO: 3,\n  WARN: 4,\n  ERROR: 5,\n  NONE: 6\n};\n/**\n * Write logs\n * @class Logger\n */\nclass ConsoleLogger {\n  /**\n   * @constructor\n   * @param {string} name - Name of the logger\n   */\n  constructor(name) {\n    let level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : LogType.WARN;\n    this.name = name;\n    this.level = level;\n    this._pluggables = [];\n  }\n  _padding(n) {\n    return n < 10 ? '0' + n : '' + n;\n  }\n  _ts() {\n    const dt = new Date();\n    return [this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') + '.' + dt.getMilliseconds();\n  }\n  configure(config) {\n    if (!config) return this._config;\n    this._config = config;\n    return this._config;\n  }\n  /**\n   * Write log\n   * @method\n   * @memeberof Logger\n   * @param {LogType|string} type - log type, default INFO\n   * @param {string|object} msg - Logging message or object\n   */\n  _log(type) {\n    let loggerLevelName = this.level;\n    if (ConsoleLogger.LOG_LEVEL) {\n      loggerLevelName = ConsoleLogger.LOG_LEVEL;\n    }\n    if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n      loggerLevelName = window.LOG_LEVEL;\n    }\n    const loggerLevel = LOG_LEVELS[loggerLevelName];\n    const typeLevel = LOG_LEVELS[type];\n    if (!(typeLevel >= loggerLevel)) {\n      // Do nothing if type is not greater than or equal to logger level (handle undefined)\n      return;\n    }\n    let log = console.log.bind(console);\n    if (type === LogType.ERROR && console.error) {\n      log = console.error.bind(console);\n    }\n    if (type === LogType.WARN && console.warn) {\n      log = console.warn.bind(console);\n    }\n    if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n      if (type === LogType.INFO && console.info) {\n        log = console.info.bind(console);\n      }\n      if (type === LogType.DEBUG && console.debug) {\n        log = console.debug.bind(console);\n      }\n    }\n    const prefix = \"[\".concat(type, \"] \").concat(this._ts(), \" \").concat(this.name);\n    let message = '';\n    for (var _len = arguments.length, msg = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      msg[_key - 1] = arguments[_key];\n    }\n    if (msg.length === 1 && typeof msg[0] === 'string') {\n      message = \"\".concat(prefix, \" - \").concat(msg[0]);\n      log(message);\n    } else if (msg.length === 1) {\n      message = \"\".concat(prefix, \" \").concat(msg[0]);\n      log(prefix, msg[0]);\n    } else if (typeof msg[0] === 'string') {\n      let obj = msg.slice(1);\n      if (obj.length === 1) {\n        obj = obj[0];\n      }\n      message = \"\".concat(prefix, \" - \").concat(msg[0], \" \").concat(obj);\n      log(\"\".concat(prefix, \" - \").concat(msg[0]), obj);\n    } else {\n      message = \"\".concat(prefix, \" \").concat(msg);\n      log(prefix, msg);\n    }\n    for (const plugin of this._pluggables) {\n      const logEvent = {\n        message,\n        timestamp: Date.now()\n      };\n      plugin.pushLogs([logEvent]);\n    }\n  }\n  /**\n   * Write General log. Default to INFO\n   * @method\n   * @memeberof Logger\n   * @param {string|object} msg - Logging message or object\n   */\n  log() {\n    for (var _len2 = arguments.length, msg = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      msg[_key2] = arguments[_key2];\n    }\n    this._log(LogType.INFO, ...msg);\n  }\n  /**\n   * Write INFO log\n   * @method\n   * @memeberof Logger\n   * @param {string|object} msg - Logging message or object\n   */\n  info() {\n    for (var _len3 = arguments.length, msg = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      msg[_key3] = arguments[_key3];\n    }\n    this._log(LogType.INFO, ...msg);\n  }\n  /**\n   * Write WARN log\n   * @method\n   * @memeberof Logger\n   * @param {string|object} msg - Logging message or object\n   */\n  warn() {\n    for (var _len4 = arguments.length, msg = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      msg[_key4] = arguments[_key4];\n    }\n    this._log(LogType.WARN, ...msg);\n  }\n  /**\n   * Write ERROR log\n   * @method\n   * @memeberof Logger\n   * @param {string|object} msg - Logging message or object\n   */\n  error() {\n    for (var _len5 = arguments.length, msg = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      msg[_key5] = arguments[_key5];\n    }\n    this._log(LogType.ERROR, ...msg);\n  }\n  /**\n   * Write DEBUG log\n   * @method\n   * @memeberof Logger\n   * @param {string|object} msg - Logging message or object\n   */\n  debug() {\n    for (var _len6 = arguments.length, msg = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      msg[_key6] = arguments[_key6];\n    }\n    this._log(LogType.DEBUG, ...msg);\n  }\n  /**\n   * Write VERBOSE log\n   * @method\n   * @memeberof Logger\n   * @param {string|object} msg - Logging message or object\n   */\n  verbose() {\n    for (var _len7 = arguments.length, msg = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      msg[_key7] = arguments[_key7];\n    }\n    this._log(LogType.VERBOSE, ...msg);\n  }\n  addPluggable(pluggable) {\n    if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n      this._pluggables.push(pluggable);\n      pluggable.configure(this._config);\n    }\n  }\n  listPluggables() {\n    return this._pluggables;\n  }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}